はい、承知いたしました。これまでのQ&AをGoogle Keepのメモとして簡潔にまとめます。

---

## **Keepメモ: iPad QRコード受付システム開発**

### **目的・要件**

* **目標:** 学会受付をiPadのWebアプリで実現 (600〜1000人規模)。
* **必須機能:**
    * iPadカメラでQRコード読み取り。
    * 日時と内容 (ID, 氏名, 参加情報) を記録。
    * 重複受付をチェック。
    * 必要なチケット (受付票, 懇親会等) を画面に表示。

### **システム構成案**

* **フロントエンド:**
    * iPad (ブラウザ)
    * HTML + CSS (Tailwind) + JavaScript
    * QR読取: `jsQR` ライブラリ
    * 履歴: `Web Storage (localStorage)`
* **バックエンド:**
    * VPS (RAM 6GB想定)
    * OS: Linux
    * Webサーバー: Nginx (リバースプロキシ)
    * WSGIサーバー: Gunicorn
    * アプリ: Flask (Python)
    * DB: PostgreSQL / MySQL (SQLiteは同時書込に弱いため非推奨)

### **主な実装ポイント (フロントエンド)**

1.  **QR読み取り:** `navigator.mediaDevices.getUserMedia` でカメラ映像表示 → `jsQR` で映像からQRコードを継続スキャン。
2.  **情報パース:** 読み取ったテキストから正規表現等でID・氏名・参加情報を抽出。
3.  **チケット表示:** パース結果に基づき、必要なチケットを動的に表示 (色分けやアイコン活用)。
4.  **履歴機能:** 読み取り成功時に `localStorage` へタイムスタンプ付きで情報を保存。ボタンクリックで履歴一覧を表示/クリア。
5.  **通信:** `Workspace API` でQRデータをバックエンド (Flask) に送信。

### **主な検討事項 (バックエンド & 通信)**

1.  **DB選択:** スプレッドシートへの保存 (GAS経由) は技術的に可能だが、パフォーマンス・同時アクセス・信頼性の観点から、1000人規模なら **PostgreSQL/MySQL** が推奨。
2.  **VPS (RAM 6GB):** OS + Nginx + Gunicorn + DB を動かすには **可能だが、余裕は少ない**。メモリチューニングと**負荷テストが必須**。
3.  **Fetch API:**
    * **遅延:** デフォルトではタイムアウトしないため、`AbortController` を使った**タイムアウト処理の実装**が必要。
    * **遮断:** ネットワークエラーでPromiseが `TypeError` で `reject` されるため、`.catch()` で**エラーハンドリング** (メッセージ表示, リトライ等) が必須。

### **次のステップ (ToDo)**

* [ ] FlaskバックエンドAPI (受付処理, 重複チェック) の実装。
* [ ] データベース設計と構築。
* [ ] VPS環境構築とデプロイ設定。
* [ ] **負荷テスト**の実施とチューニング。
* [ ] UI/UXの最終調整とエラー表示の洗練。
* [ ] 当日の運用体制・トラブルシューティング計画。

---